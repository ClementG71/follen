---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getStaticPageBySlug } from '../lib/wagtail';

// Récupérer la page statique spécifique
const { slug } = Astro.params;
const page = await getStaticPageBySlug(slug);

// Si la page n'est pas trouvée, on pourrait rediriger vers 404
// if (!page) return Astro.redirect('/404');
---

<BaseLayout title={page?.title || 'Page Follen non trouvée'}>
    <section>
        {page ? (
            <div class="max-w-4xl mx-auto">
                {page.header_image && page.header_image.meta && (
                    <img src={page.header_image.meta.download_url} alt={page.title} class="w-full h-64 object-cover rounded-lg mb-6">
                )}
                
                <h1 class="text-4xl font-bold mb-6">{page.title}</h1>
                
                <div class="prose max-w-none">
                    <set:html>{page.content}</set:html>
                </div>
            </div>
        ) : (
            <div class="text-center py-12">
                <h1 class="text-3xl font-bold mb-4">Page Follen non trouvée</h1>
                <p class="text-gray-600">La page Follen que vous recherchez n'existe pas.</p>
                <a href="/" class="text-blue-600 hover:underline mt-4 inline-block">← Retour à l'accueil Follen</a>
            </div>
        )}
    </section>
</BaseLayout>
