---
// src/components/ActionCardsSection.astro

// Dictionnaire d'icônes SVG (Inline pour éviter les dépendances)
const icons = {
    wrench: `<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>`,
    megaphone: `<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 11 18-5v12L3 14v-3z"/><path d="M11.6 16.8a3 3 0 1 1-5.8-1.6"/></svg>`,
    leaf: `<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z"/><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/></svg>`,
    handshake: `<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 12h2a2 2 0 1 0 0-4h-3c-.6 0-1.1-.2-1.4-.6L7 8"/><path d="M7 18h1a2 2 0 0 0 0-4H5c-.6 0-1.1-.2-1.4-.6L3 12"/><path d="m13.7 15.7 2.7-2.7a2 2 0 0 0 0-2.8l-2.7-2.7"/><path d="m8.3 20.3-2.7-2.7a2 2 0 0 1 0-2.8l2.7-2.7"/><path d="M18 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2Z"/></svg>`,
    book: `<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/></svg>`,
    mail: `<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>`,
    default: `<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>`
};

interface CardData {
    title: string;
    description: string;
    iconName: string;
    link?: string;
    linkText?: string;
}

interface Props {
    title?: string;
    description?: string;
    cards?: CardData[];
    layout?: 'grid' | 'square';
}

const { 
    title = "Agir avec Follen",
    description = "Découvrez comment vous pouvez participer à notre mission",
    cards = [],
    layout = 'grid'
} = Astro.props;

// Mock data si aucune donnée n'est fournie
const displayCards = cards.length > 0 ? cards : [
    {
        title: "Proposer un projet",
        description: "Vous avez une idée pour améliorer l'agriculture locale ? Soumettez votre projet à notre communauté.",
        iconName: "wrench",
        link: "/projets",
        linkText: "En savoir plus"
    },
    {
        title: "Devenir partenaire",
        description: "Rejoignez notre réseau de partenaires engagés pour la transition écologique et sociale.",
        iconName: "megaphone",
        link: "/partenaires",
        linkText: "Nous contacter"
    },
    {
        title: "Soutenir nos actions",
        description: "Faites un don ou devenez bénévole pour soutenir nos actions sur le terrain.",
        iconName: "leaf",
        link: "/soutenir",
        linkText: "Participer"
    }
];

---

<section class="py-24 bg-gray-50">
    <div class="container mx-auto px-6">
        <!-- Section Header -->
        <div class="text-center max-w-2xl mx-auto mb-20">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">{title}</h2>
            <p class="text-xl text-gray-600">{description}</p>
        </div>

        <!-- Cards Grid -->
        <div class:list={[
            "grid gap-y-16 gap-x-8",
            layout === 'square' 
                ? "grid-cols-1 md:grid-cols-2 max-w-4xl mx-auto" // Layout carré centré
                : "grid-cols-1 md:grid-cols-2 lg:grid-cols-3"    // Layout standard
        ]}>
            {displayCards.map((card) => (
                <div class="relative mt-8">
                    {/* Carte Fond Bleu */}
                    <div class="bg-blue-600 rounded-2xl p-8 pt-12 h-full flex flex-col shadow-lg hover:shadow-xl transition-shadow duration-300 transform hover:-translate-y-1">
                        
                        {/* Icône Flottante (Position Absolute) */}
                        <div class="absolute -top-10 left-8">
                            <div class="w-20 h-20 bg-white rounded-full flex items-center justify-center shadow-md text-blue-600 p-4 border-4 border-gray-50">
                                <Fragment set:html={icons[card.iconName] || icons.default} />
                            </div>
                        </div>

                        {/* Contenu Carte */}
                        <h3 class="text-2xl font-bold text-white mb-4 mt-2">
                            {card.title}
                        </h3>
                        
                        <p class="text-blue-100 mb-8 flex-grow leading-relaxed">
                            {card.description}
                        </p>

                        {/* Lien (Optionnel) */}
                        {card.link && (
                            <a 
                                href={card.link} 
                                class="inline-flex items-center text-white font-bold hover:text-blue-200 transition-colors group"
                            >
                                {card.linkText || "Voir détails"}
                                <svg class="w-5 h-5 ml-2 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                                </svg>
                            </a>
                        )}
                    </div>
                </div>
            ))}
        </div>
    </div>
</section>
